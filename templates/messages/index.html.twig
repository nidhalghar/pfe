{% if app.user.roles[0] == 'ROLE_RECRUTEUR' %}
    {% include 'base.recruteur.html.twig' %}
{% elseif app.user.roles[0] == 'ROLE_CANDIDAT' %}
    {% include 'base.msg.html.twig' %}
{% endif %}





{% block stylesheets %} 
<style>
    .offcanvas-bottom {
  height: 80vh;
}
</style>
{% endblock %}


{% block body %}
<section class="container">
  <div class="row">
    <div class="col-12">
   
       <h2>Boite de réception</h2>
       <p> Vous avez Reçus :</p>
      </div>
      <table class="table">
        <thead>
            <tr>
                <th>De</th>
                <th>Sujet</th>
                <th>Date</th>
               
                <th>actions</th>
            </tr>
        </thead>
        <tbody>
        {% for message in app.user.received %}
          {% set bold = ""%}
      {% if message.isRead == 0 %}
         {% set bold = "fw-bold" %}
      {% endif %}
            <tr>
                <td  class =" {{bold}}">{{message.sender.email}}</td>
                <td  class ="{{bold}}"><a href="{{ path("app_read",{id:message.id})}}">{{message.titre}}</a></td>
                <td  class =" {{bold}}">{{message.createdAt|date}}</td>
                <td><a href="{{ path("app_delete",{id: message.id})}}"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-excel-fill text-danger" viewBox="0 0 16 16">
                        <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5.884 4.68 8 7.219l2.116-2.54a.5.5 0 1 1 .768.641L8.651 8l2.233 2.68a.5.5 0 0 1-.768.64L8 8.781l-2.116 2.54a.5.5 0 0 1-.768-.641L7.349 8 5.116 5.32a.5.5 0 1 1 .768-.64z"/>
                      </svg></a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
   <div class="d-flex justify-content-between">
  <a class="btn btn-primary btn-lg" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
    Voir mes dossiers
  </a>
  <a class="btn btn-outline-secondary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">
    Envoyer un message
  </a>
</div>

</section>


<div class="offcanvas offcanvas-bottom" tabindex="10" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel">
  <div  class="offcanvas-header">

    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body small">
   <section class="container">
  <div class="row">
    <div class="col">
       <h1>Envoyer un message</h1>
      {{form_start(form)}} 
      {{form_row(form.titre)}}
       {{form_row(form.message)}}
        {{form_row(form.recipient)}}
    <div class="d-flex justify-content-center my-4">
  <button class="btn btn-lg btn-primary rounded-pill text-light" type="submit"><i class="fa fa-paper-plane"></i> Envoyer</button>
</div>

       {{form_end(form)}}

    <div>
  </div>
</section>
  </div>
</div>
      <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
  <div class="offcanvas-header">
    <h2 class="offcanvas-title" id="offcanvasExampleLabel">Mes Dossiers</h2>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
     <div class="list-group">
     <a href="{{path("app_messages")}}" class="list-group-item list-group-item-action active">Acceuil</a>
     </div> 
    <div class="list-group">
  <a href="{{ path("app_recevied") }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
    Boîte de réception
    <span class="badge bg-primary rounded-pill">{{ app.user.received|length }}</span>
  </a>
</div>
    <div class="list-group">
  <a href="{{ path("app_sent") }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
    Elément envoyer
    <span class="badge bg-primary rounded-pill">{{ app.user.sent|length }}</span>
  </a>
</div>

  </div>
</div>
{% endblock %}
